import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { userEvent, waitFor, within } from "@storybook/testing-library";
import { expect } from "@storybook/jest";

import InteractionSignIn from "~/components/interaction/SignIn.vue";

<Meta
  title="Interaction/SignIn"
  component={InteractionSignIn}
  argTypes={{
    placeholder: {
      name: "placeholder",
      type: { name: "string", required: false },
      defaultValue: "Hello"
    }
  }}
/>

export const Template = args => <InteractionSignIn v-bind="args" />;

# SignIn

A sign in form.

<Canvas>
  <Story
    name="SignIn"
    play={async ({canvasElement, args}) => {
      const canvas = within(canvasElement);

      await userEvent.type(canvas.getByTestId('identity'), 'hi@example.com');

      await userEvent.click(canvas.getByRole('button'));
    }}

>

    {args => {
      return {
        setup() {
          return { args };
        },
        components: { InteractionSignIn },
        template: `
          <InteractionSignIn v-bind="args" />`
      };
    }}

  </Story>
</Canvas>
